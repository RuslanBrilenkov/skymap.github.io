<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sky Coverage Explorer ‚Äî Feature Guide</title>
  <style>
    /* ‚îÄ‚îÄ Base ‚îÄ‚îÄ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:        #0d1117;
      --surface:   #161b22;
      --surface2:  #21262d;
      --border:    #30363d;
      --text:      #e6edf3;
      --muted:     #8b949e;
      --accent:    #58a6ff;
      --accent2:   #79c0ff;
      --green:     #3fb950;
      --yellow:    #d29922;
      --purple:    #bc8cff;
      --orange:    #f78166;
      --teal:      #44aa99;

      /* Survey palette (Rainbow theme) */
      --c-kids:        #AA6F9E;
      --c-euclid:      #882E72;
      --c-hsc:         #1965B0;
      --c-des:         #6195CF;
      --c-unions:      #4EB265;
      --c-desi:        #F7CB45;
      --c-erass1:      #EE8026;
      --c-lsst:        #DC050C;
      --c-roman:       #DDCC77;
      --c-roman-deep:  #44AA99;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.55;
      font-size: 14px;
    }

    /* ‚îÄ‚îÄ Layout ‚îÄ‚îÄ */
    .page { max-width: 1100px; margin: 0 auto; padding: 40px 24px 80px; }

    /* ‚îÄ‚îÄ Hero ‚îÄ‚îÄ */
    .hero {
      text-align: center;
      padding: 56px 0 48px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 56px;
    }
    .hero-badge {
      display: inline-block;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 4px 14px;
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 0.05em;
      margin-bottom: 20px;
    }
    .hero h1 {
      font-size: 38px;
      font-weight: 700;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, var(--accent2), var(--purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 14px;
    }
    .hero p {
      font-size: 17px;
      color: var(--muted);
      max-width: 560px;
      margin: 0 auto;
    }

    /* ‚îÄ‚îÄ Section headings ‚îÄ‚îÄ */
    .section-label {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 20px;
    }
    .section-label::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border);
    }

    /* ‚îÄ‚îÄ App Layout Diagram ‚îÄ‚îÄ */
    .app-layout {
      display: grid;
      grid-template-columns: 220px 1fr;
      gap: 4px;
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 56px;
      font-size: 12px;
    }
    .app-sidebar {
      background: var(--surface);
      padding: 16px;
      border-right: 1px solid var(--border);
    }
    .app-sidebar .brand {
      font-weight: 700;
      font-size: 13px;
      color: var(--accent2);
      margin-bottom: 14px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border);
    }
    .sidebar-section { margin-bottom: 14px; }
    .sidebar-section h4 {
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--muted);
      margin-bottom: 8px;
    }
    .mock-dropdown {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 6px 10px;
      font-size: 11px;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
    }
    .mock-checkbox {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 4px;
      font-size: 11px;
    }
    .mock-checkbox .dot {
      width: 10px; height: 10px; border-radius: 2px; flex-shrink: 0;
    }
    .mock-stat {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 8px;
      margin-bottom: 6px;
      font-size: 11px;
    }
    .mock-stat strong { display: block; font-size: 18px; color: var(--accent); }
    .mock-btn {
      display: block;
      width: 100%;
      margin-bottom: 5px;
      padding: 5px 8px;
      border-radius: 5px;
      font-size: 11px;
      text-align: center;
      border: 1px solid var(--border);
      background: var(--surface2);
      color: var(--text);
    }
    .mock-btn.primary { background: var(--accent); color: #000; border-color: var(--accent); }
    .app-map-panel { background: #020408; position: relative; min-height: 380px; }
    .map-topbar {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 8px 14px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 11px;
    }
    .view-btns { display: flex; gap: 4px; }
    .view-btn {
      padding: 3px 10px;
      border-radius: 4px;
      font-size: 10px;
      border: 1px solid var(--border);
      background: var(--surface2);
      color: var(--text);
    }
    .view-btn.active { background: var(--accent); color: #000; border-color: var(--accent); }
    .mock-globe {
      position: absolute;
      inset: 40px 0 0 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--muted);
      font-size: 11px;
      flex-direction: column;
      gap: 8px;
    }
    .globe-svg { opacity: 0.55; }

    /* Survey overlay arcs on globe */
    .map-overlay-label {
      position: absolute;
      font-size: 10px;
      color: var(--muted);
    }

    .map-legend {
      position: absolute;
      bottom: 10px;
      left: 12px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 10px;
    }
    .legend-item { display: flex; align-items: center; gap: 4px; }
    .legend-swatch { width: 12px; height: 12px; border-radius: 2px; }

    /* ‚îÄ‚îÄ Feature Grid ‚îÄ‚îÄ */
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-bottom: 56px;
    }
    .feature-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 20px;
      transition: border-color 0.15s;
    }
    .feature-card:hover { border-color: var(--accent); }
    .feature-icon {
      width: 36px; height: 36px;
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px;
      margin-bottom: 12px;
    }
    .feature-card h3 {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--text);
    }
    .feature-card p {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.6;
    }
    .tag {
      display: inline-block;
      font-size: 10px;
      font-weight: 600;
      padding: 2px 7px;
      border-radius: 10px;
      margin-top: 8px;
    }
    .tag-blue  { background: #1f3d6b; color: var(--accent2); }
    .tag-green { background: #1a3d26; color: var(--green); }
    .tag-purple{ background: #2d1f4e; color: var(--purple); }
    .tag-orange{ background: #3d2210; color: var(--orange); }
    .tag-yellow{ background: #3d2e0a; color: #f0c040; }
    .tag-teal  { background: #0e2e2a; color: var(--teal); }

    /* ‚îÄ‚îÄ Surveys Catalog ‚îÄ‚îÄ */
    .surveys-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-bottom: 56px;
    }
    .survey-pill {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px 14px;
      position: relative;
      overflow: hidden;
    }
    .survey-pill::before {
      content: '';
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 4px;
    }
    .survey-pill .survey-name {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 2px;
    }
    .survey-pill .survey-area {
      font-size: 10px;
      color: var(--muted);
    }

    /* ‚îÄ‚îÄ Workflow ‚îÄ‚îÄ */
    .workflow {
      display: flex;
      gap: 0;
      margin-bottom: 56px;
      align-items: stretch;
    }
    .workflow-step {
      flex: 1;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 0;
      padding: 22px 18px;
      position: relative;
      text-align: center;
    }
    .workflow-step:first-child { border-radius: 10px 0 0 10px; }
    .workflow-step:last-child  { border-radius: 0 10px 10px 0; }
    .workflow-step + .workflow-step { border-left: none; }
    .step-num {
      width: 28px; height: 28px;
      border-radius: 50%;
      background: var(--accent);
      color: #000;
      font-size: 12px;
      font-weight: 700;
      display: flex; align-items: center; justify-content: center;
      margin: 0 auto 10px;
    }
    .workflow-step h4 { font-size: 12px; font-weight: 600; margin-bottom: 6px; }
    .workflow-step p  { font-size: 11px; color: var(--muted); line-height: 1.5; }
    .workflow-arrow {
      display: flex;
      align-items: center;
      color: var(--muted);
      font-size: 18px;
      flex-shrink: 0;
      padding: 0 2px;
      z-index: 1;
    }

    /* ‚îÄ‚îÄ Views comparison ‚îÄ‚îÄ */
    .views-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 56px;
    }
    .view-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      overflow: hidden;
    }
    .view-header {
      background: var(--surface2);
      border-bottom: 1px solid var(--border);
      padding: 10px 16px;
      font-size: 12px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .view-body { padding: 20px; }
    .view-body p { font-size: 12px; color: var(--muted); margin-bottom: 8px; }
    .view-body ul { font-size: 12px; color: var(--muted); padding-left: 18px; }
    .view-body ul li { margin-bottom: 4px; }

    /* Globe mock */
    .globe-preview {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #020408;
      border-radius: 8px;
      margin-bottom: 14px;
      padding: 8px 0;
    }

    /* EQ map mock */
    .eq-preview {
      background: #020408;
      border-radius: 8px;
      margin-bottom: 14px;
      padding: 10px;
      position: relative;
      overflow: hidden;
    }

    /* ‚îÄ‚îÄ Catalog workflow ‚îÄ‚îÄ */
    .catalog-flow {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin-bottom: 56px;
    }
    .flow-box {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 18px 14px;
      text-align: center;
    }
    .flow-icon { font-size: 26px; margin-bottom: 8px; }
    .flow-box h4 { font-size: 12px; font-weight: 600; margin-bottom: 6px; }
    .flow-box p  { font-size: 11px; color: var(--muted); }
    .flow-arrow  {
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--muted);
      font-size: 22px;
      align-self: center;
      flex-shrink: 0;
    }

    /* ‚îÄ‚îÄ Color themes ‚îÄ‚îÄ */
    .themes-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
      margin-bottom: 56px;
    }
    .theme-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 16px;
    }
    .theme-card h4 { font-size: 12px; font-weight: 600; margin-bottom: 10px; }
    .theme-swatches { display: flex; gap: 6px; flex-wrap: wrap; }
    .swatch {
      width: 22px; height: 22px;
      border-radius: 5px;
      border: 1px solid rgba(255,255,255,0.08);
    }

    /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
    .footer {
      border-top: 1px solid var(--border);
      padding-top: 28px;
      text-align: center;
      font-size: 12px;
      color: var(--muted);
    }
    .footer a { color: var(--accent); text-decoration: none; }

    /* ‚îÄ‚îÄ Inline code ‚îÄ‚îÄ */
    code {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 1px 5px;
      font-family: 'SF Mono', 'Cascadia Code', monospace;
      font-size: 11px;
      color: var(--orange);
    }

    .note {
      background: var(--surface2);
      border-left: 3px solid var(--accent);
      border-radius: 0 6px 6px 0;
      padding: 10px 14px;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 16px;
    }

    @media print {
      body { background: #fff; color: #111; }
      :root {
        --bg: #fff; --surface: #f6f8fa; --surface2: #eaeef2;
        --border: #d0d7de; --text: #24292f; --muted: #57606a;
      }
    }
  </style>
</head>
<body>
<div class="page">

  <!-- ‚îÄ‚îÄ HERO ‚îÄ‚îÄ -->
  <div class="hero">
    <div class="hero-badge">v2.3.0 ¬∑ Feature Guide</div>
    <h1>Sky Coverage Explorer</h1>
    <p>An interactive web app for visualizing astronomical survey footprints,
       comparing overlaps, and cross-matching source catalogs ‚Äî all in your browser.</p>
  </div>

  <!-- ‚îÄ‚îÄ APP LAYOUT DIAGRAM ‚îÄ‚îÄ -->
  <div class="section-label">Application Layout</div>
  <div class="app-layout" style="margin-bottom:56px">
    <div class="app-sidebar">
      <div class="brand">Sky Coverage Explorer</div>

      <div class="sidebar-section">
        <h4>Surveys</h4>
        <div class="mock-dropdown">Select Survey(s) <span>‚ñæ</span></div>
        <div style="margin-top:8px">
          <div class="mock-checkbox"><div class="dot" style="background:var(--c-euclid)"></div>Euclid DR1</div>
          <div class="mock-checkbox"><div class="dot" style="background:var(--c-lsst)"></div>LSST WFD</div>
          <div class="mock-checkbox"><div class="dot" style="background:var(--c-roman)"></div>Roman HLWAS</div>
          <div class="mock-checkbox" style="color:var(--muted)"><div class="dot" style="background:var(--border)"></div>+ 7 more‚Ä¶</div>
        </div>
      </div>

      <div class="sidebar-section">
        <h4>Coverage</h4>
        <div class="mock-stat"><strong>3</strong>Surveys selected</div>
        <div class="mock-stat"><strong style="color:var(--green);font-size:14px">1,842.3</strong>Intersection area (sq deg)</div>
      </div>

      <div class="sidebar-section">
        <h4>Actions</h4>
        <div class="mock-btn">Upload catalog</div>
        <div class="mock-btn">Upload MOC</div>
        <div class="mock-btn primary">Download catalog</div>
        <div class="mock-btn">Reset</div>
      </div>

      <div class="sidebar-section">
        <h4>Color Theme</h4>
        <div class="mock-dropdown">Rainbow <span>‚ñæ</span></div>
      </div>

      <div class="sidebar-section">
        <h4>Preferences</h4>
        <div class="mock-checkbox">
          <input type="checkbox" checked readonly style="pointer-events:none" />
          Remember selections
        </div>
      </div>
    </div>

    <div class="app-map-panel">
      <div class="map-topbar">
        <span style="font-weight:600;color:var(--accent2)">Aladin Lite v2</span>
        <div class="view-btns">
          <div class="view-btn active">Aladin</div>
          <div class="view-btn">Equirectangular</div>
        </div>
        <div style="display:flex;align-items:center;gap:8px;font-size:11px;color:var(--muted)">
          Dark <span style="display:inline-block;width:28px;height:14px;background:var(--surface2);border:1px solid var(--border);border-radius:7px;vertical-align:middle"></span> Light
        </div>
      </div>

      <!-- Mock globe -->
      <div class="mock-globe">
        <svg class="globe-svg" width="240" height="240" viewBox="0 0 240 240">
          <defs>
            <radialGradient id="globe-grad" cx="40%" cy="35%">
              <stop offset="0%" stop-color="#1a2a40"/>
              <stop offset="100%" stop-color="#020408"/>
            </radialGradient>
          </defs>
          <!-- sphere -->
          <circle cx="120" cy="120" r="110" fill="url(#globe-grad)" stroke="#30363d" stroke-width="1"/>
          <!-- grid lines -->
          <ellipse cx="120" cy="120" rx="110" ry="40" fill="none" stroke="#1e2a3a" stroke-width="0.7"/>
          <ellipse cx="120" cy="120" rx="110" ry="75" fill="none" stroke="#1e2a3a" stroke-width="0.7"/>
          <line x1="120" y1="10" x2="120" y2="230" stroke="#1e2a3a" stroke-width="0.7"/>
          <ellipse cx="120" cy="120" rx="50" ry="110" fill="none" stroke="#1e2a3a" stroke-width="0.7"/>
          <!-- survey patches -->
          <!-- Euclid (purple) - wide band -->
          <path d="M 55 85 Q 120 70 185 90 Q 180 105 120 100 Q 60 105 55 85 Z"
                fill="#882E72" opacity="0.6"/>
          <!-- LSST (red) - southern cap -->
          <path d="M 65 155 Q 120 145 175 155 Q 170 185 120 195 Q 70 185 65 155 Z"
                fill="#DC050C" opacity="0.55"/>
          <!-- Roman HLWAS (gold) - diagonal band -->
          <path d="M 50 110 Q 120 95 200 115 Q 195 130 120 125 Q 55 130 50 110 Z"
                fill="#DDCC77" opacity="0.5"/>
          <!-- Galactic plane dashed line -->
          <path d="M 15 160 Q 80 90 120 85 Q 160 80 225 145"
                fill="none" stroke="#f0c040" stroke-width="1" stroke-dasharray="4 3" opacity="0.5"/>
        </svg>
      </div>

      <!-- Legend bar at bottom of map -->
      <div class="map-legend">
        <div class="legend-item"><div class="legend-swatch" style="background:var(--c-euclid)"></div>Euclid DR1</div>
        <div class="legend-item"><div class="legend-swatch" style="background:var(--c-lsst)"></div>LSST WFD</div>
        <div class="legend-item"><div class="legend-swatch" style="background:var(--c-roman)"></div>Roman HLWAS</div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ KEY FEATURES ‚îÄ‚îÄ -->
  <div class="section-label">Key Features</div>
  <div class="feature-grid">

    <div class="feature-card">
      <div class="feature-icon" style="background:#1a2a50">üó∫Ô∏è</div>
      <h3>Dual Map Views</h3>
      <p>Switch between an interactive <strong>Aladin Lite globe</strong> for sky navigation and an <strong>Equirectangular projection</strong> with RA/Dec grid for flat-map analysis.</p>
      <span class="tag tag-blue">Aladin v2</span>
      <span class="tag tag-blue">D3.js EQ Map</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#1a3820">‚òëÔ∏è</div>
      <h3>Survey Selection</h3>
      <p>Choose from <strong>10 built-in surveys</strong> via a dropdown with checkboxes. Reorder surveys to control draw layering. "Select all" available for quick comparison.</p>
      <span class="tag tag-green">10 Surveys</span>
      <span class="tag tag-green">Drag to Reorder</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#2d1f4e">üìê</div>
      <h3>Coverage Analysis</h3>
      <p>Live stats show the <strong>intersection area</strong> in sq deg for selected surveys. Toggle <strong>cross-match mode</strong> to highlight only the overlapping regions on the map.</p>
      <span class="tag tag-purple">MOC Algebra</span>
      <span class="tag tag-purple">WASM engine</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#3d2210">üì§</div>
      <h3>Catalog Upload</h3>
      <p>Upload a <code>CSV</code> or <code>TSV</code> file with <code>ra</code>/<code>dec</code> columns. Sources are plotted on both maps. RA in hours is auto-detected and converted.</p>
      <span class="tag tag-orange">CSV / TSV</span>
      <span class="tag tag-orange">Local processing</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#1a3820">‚¨áÔ∏è</div>
      <h3>Augmented Catalog Download</h3>
      <p>Download an enhanced version of your catalog with <strong>boolean membership columns</strong> appended ‚Äî one column per selected survey indicating whether each source falls within it.</p>
      <span class="tag tag-green">Augmented CSV</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#0e2e2a">üî≠</div>
      <h3>Custom MOC Upload</h3>
      <p>Upload your own <strong>MOC FITS file</strong> to overlay any custom sky region on both map views. The MOC integrates with cross-matching and coverage area display.</p>
      <span class="tag tag-teal">FITS format</span>
      <span class="tag tag-teal">NUNIQ encoding</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#3d2e0a">üé®</div>
      <h3>Color Themes</h3>
      <p>Three perceptual color palettes: <strong>Rainbow</strong>, <strong>Iridescent</strong>, and <strong>Vivid</strong> ‚Äî all based on Paul Tol's color schemes with 10+ distinct, colorblind-friendly colors.</p>
      <span class="tag tag-yellow">Paul Tol palettes</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#1a2a50">üåó</div>
      <h3>Dark / Light Mode</h3>
      <p>Toggle the UI between <strong>dark</strong> and <strong>light</strong> themes via the topbar switch. The equirectangular map background adapts to match the active theme.</p>
      <span class="tag tag-blue">Persistent</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#1a3820">üíæ</div>
      <h3>Persist Selections</h3>
      <p>Opt in to <strong>remember your survey selections</strong> between sessions using browser localStorage. Reopen the page and your previous state is restored automatically.</p>
      <span class="tag tag-green">localStorage</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#3d2210">üìÑ</div>
      <h3>PDF Map Export</h3>
      <p>In Equirectangular view, download a <strong>print-quality PDF</strong> of the sky map including the in-map legend, axis labels, overlays, and current theme colors.</p>
      <span class="tag tag-orange">jsPDF</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#2d1f4e">üåê</div>
      <h3>EQ Map Overlays</h3>
      <p>Toggle the <strong>RA/Dec coordinate grid</strong>, <strong>Galactic plane</strong>, and <strong>Ecliptic plane</strong> on the equirectangular map independently. In-map legend updates dynamically.</p>
      <span class="tag tag-purple">Grid</span>
      <span class="tag tag-purple">Galactic</span>
      <span class="tag tag-purple">Ecliptic</span>
    </div>

    <div class="feature-card">
      <div class="feature-icon" style="background:#0e2e2a">‚ö°</div>
      <h3>WebAssembly MOC Engine</h3>
      <p>All MOC intersection calculations run client-side via a compiled <strong>Rust/WASM module</strong> ‚Äî no server required. Area computations are fast and fully private.</p>
      <span class="tag tag-teal">Rust WASM</span>
      <span class="tag tag-teal">In-browser</span>
    </div>

  </div>

  <!-- ‚îÄ‚îÄ SURVEYS ‚îÄ‚îÄ -->
  <div class="section-label">Available Surveys</div>
  <div class="surveys-grid" style="margin-bottom:56px">

    <div class="survey-pill" style="--c:var(--c-euclid)">
      <div style="position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--c-euclid);border-radius:8px 0 0 8px"></div>
      <div class="survey-name">Euclid DR1</div>
      <div class="survey-area">~2,109 sq deg ¬∑ optical/NIR</div>
    </div>

    <div class="survey-pill">
      <div style="position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--c-lsst);border-radius:8px 0 0 8px"></div>
      <div class="survey-name">LSST WFD</div>
      <div class="survey-area">~18,000 sq deg ¬∑ optical</div>
    </div>

    <div class="survey-pill">
      <div style="position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--c-roman);border-radius:8px 0 0 8px"></div>
      <div class="survey-name">Roman HLWAS</div>
      <div class="survey-area">~5,314 sq deg ¬∑ NIR</div>
    </div>

    <div class="survey-pill">
      <div style="position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--c-roman-deep);border-radius:8px 0 0 8px"></div>
      <div class="survey-name">Roman HLWAS Deep</div>
      <div class="survey-area">~35.6 sq deg ¬∑ COSMOS + XMM-LSS</div>
    </div>

    <div class="survey-pill">
      <div style="position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--c-desi);border-radius:8px 0 0 8px"></div>
      <div class="survey-name">DESI Legacy DR9</div>
      <div class="survey-area">~14,000 sq deg ¬∑ optical</div>
    </div>

    <div class="survey-pill">
      <div style="position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--c-des);border-radius:8px 0 0 8px"></div>
      <div class="survey-name">DES</div>
      <div class="survey-area">~5,000 sq deg ¬∑ optical</div>
    </div>

    <div class="survey-pill">
      <div style="position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--c-hsc);border-radius:8px 0 0 8px"></div>
      <div class="survey-name">HSC</div>
      <div class="survey-area">~1,100 sq deg ¬∑ optical</div>
    </div>

    <div class="survey-pill">
      <div style="position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--c-kids);border-radius:8px 0 0 8px"></div>
      <div class="survey-name">KiDS</div>
      <div class="survey-area">~1,350 sq deg ¬∑ optical</div>
    </div>

    <div class="survey-pill">
      <div style="position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--c-unions);border-radius:8px 0 0 8px"></div>
      <div class="survey-name">UNIONS</div>
      <div class="survey-area">~4,800 sq deg ¬∑ optical</div>
    </div>

    <div class="survey-pill">
      <div style="position:absolute;left:0;top:0;bottom:0;width:4px;background:var(--c-erass1);border-radius:8px 0 0 8px"></div>
      <div class="survey-name">eRASS1</div>
      <div class="survey-area">~13,000 sq deg ¬∑ X-ray</div>
    </div>

  </div>

  <!-- ‚îÄ‚îÄ MAP VIEWS ‚îÄ‚îÄ -->
  <div class="section-label">Map Views</div>
  <div class="views-row">

    <div class="view-card">
      <div class="view-header">
        üåç Aladin View (Globe)
        <span class="tag tag-blue" style="margin-left:auto">Default</span>
      </div>
      <div class="view-body">
        <div class="globe-preview">
          <svg width="200" height="160" viewBox="0 0 200 160">
            <circle cx="100" cy="80" r="72" fill="#020408" stroke="#30363d" stroke-width="1"/>
            <ellipse cx="100" cy="80" rx="72" ry="26" fill="none" stroke="#1e2a3a" stroke-width="0.8"/>
            <line x1="100" y1="8" x2="100" y2="152" stroke="#1e2a3a" stroke-width="0.8"/>
            <ellipse cx="100" cy="80" rx="35" ry="72" fill="none" stroke="#1e2a3a" stroke-width="0.8"/>
            <path d="M 38 65 Q 100 50 162 70 Q 158 82 100 78 Q 42 82 38 65 Z" fill="#882E72" opacity="0.65"/>
            <path d="M 42 100 Q 100 88 158 100 Q 154 125 100 132 Q 46 125 42 100 Z" fill="#DC050C" opacity="0.55"/>
            <path d="M 32 82 Q 100 68 172 85 Q 168 98 100 94 Q 36 98 32 82 Z" fill="#DDCC77" opacity="0.5"/>
            <path d="M 10 125 Q 60 60 100 55 Q 140 50 190 110" fill="none" stroke="#f0c040" stroke-width="1" stroke-dasharray="3 2" opacity="0.5"/>
            <text x="100" y="155" text-anchor="middle" font-size="9" fill="#57606a" font-family="system-ui">Click &amp; drag to rotate</text>
          </svg>
        </div>
        <ul>
          <li>Interactive globe ‚Äî click &amp; drag to rotate, scroll to zoom</li>
          <li>MOC overlays rendered natively by Aladin Lite</li>
          <li>Legend bar displayed at the bottom of the map</li>
          <li>Catalog sources plotted as colored circles</li>
          <li>Supports any Aladin sky survey background</li>
        </ul>
      </div>
    </div>

    <div class="view-card">
      <div class="view-header">
        üó∫Ô∏è Equirectangular View (Flat)
      </div>
      <div class="view-body">
        <div class="eq-preview" style="height:130px">
          <svg width="100%" height="110" viewBox="0 0 400 110">
            <!-- RA axis -->
            <line x1="30" y1="100" x2="390" y2="100" stroke="#30363d" stroke-width="0.8"/>
            <!-- Dec axis -->
            <line x1="30" y1="5" x2="30" y2="100" stroke="#30363d" stroke-width="0.8"/>
            <!-- Grid -->
            <line x1="30" y1="52" x2="390" y2="52" stroke="#1e2a3a" stroke-width="0.5" stroke-dasharray="3 2"/>
            <line x1="210" y1="5" x2="210" y2="100" stroke="#1e2a3a" stroke-width="0.5" stroke-dasharray="3 2"/>
            <!-- Galactic plane curve -->
            <path d="M 30 70 Q 100 20 210 15 Q 310 12 390 60" fill="none" stroke="#f0c040" stroke-width="1" stroke-dasharray="4 2" opacity="0.6"/>
            <!-- Ecliptic curve -->
            <path d="M 30 55 Q 100 35 210 55 Q 310 75 390 55" fill="none" stroke="#8b6fc4" stroke-width="1" stroke-dasharray="4 2" opacity="0.6"/>
            <!-- Survey patches -->
            <rect x="80" y="30" width="120" height="25" fill="#882E72" opacity="0.55" rx="2"/>
            <rect x="50" y="65" width="200" height="22" fill="#DC050C" opacity="0.5" rx="2"/>
            <rect x="70" y="48" width="220" height="18" fill="#DDCC77" opacity="0.45" rx="2"/>
            <!-- Labels -->
            <text x="28" y="104" text-anchor="end" font-size="7" fill="#57606a">-90¬∞</text>
            <text x="28" y="54" text-anchor="end" font-size="7" fill="#57606a">0¬∞</text>
            <text x="28" y="8" text-anchor="end" font-size="7" fill="#57606a">+90¬∞</text>
            <text x="30" y="109" text-anchor="middle" font-size="7" fill="#57606a">360¬∞</text>
            <text x="210" y="109" text-anchor="middle" font-size="7" fill="#57606a">180¬∞</text>
            <text x="390" y="109" text-anchor="middle" font-size="7" fill="#57606a">0¬∞</text>
          </svg>
        </div>
        <ul>
          <li>Full-sky RA/Dec projection ‚Äî great for screenshots &amp; publication</li>
          <li>Toggle coordinate grid, galactic plane, ecliptic overlay</li>
          <li>In-map legend with colored swatches rendered directly on SVG</li>
          <li>Export to <strong>PDF</strong> with one click (retains all overlays)</li>
          <li>Light/Dark mode affects map background color</li>
        </ul>
      </div>
    </div>

  </div>

  <!-- ‚îÄ‚îÄ CATALOG WORKFLOW ‚îÄ‚îÄ -->
  <div class="section-label">Catalog Cross-Match Workflow</div>
  <div style="display:grid;grid-template-columns:1fr auto 1fr auto 1fr auto 1fr;gap:4px;margin-bottom:56px;align-items:stretch">

    <div class="flow-box">
      <div class="flow-icon">üìã</div>
      <h4>Prepare CSV</h4>
      <p>File must have <code>ra</code> and <code>dec</code> columns (case-insensitive). RA in hours auto-detected.</p>
    </div>
    <div class="flow-arrow">‚Üí</div>

    <div class="flow-box">
      <div class="flow-icon">‚¨ÜÔ∏è</div>
      <h4>Upload Catalog</h4>
      <p>Click "Upload catalog" in the sidebar. Sources are plotted instantly on both map views.</p>
    </div>
    <div class="flow-arrow">‚Üí</div>

    <div class="flow-box">
      <div class="flow-icon">üîç</div>
      <h4>Select Surveys</h4>
      <p>Choose which surveys to cross-match against. Toggle "Show cross-match only" to isolate overlaps.</p>
    </div>
    <div class="flow-arrow">‚Üí</div>

    <div class="flow-box">
      <div class="flow-icon">‚¨áÔ∏è</div>
      <h4>Download Result</h4>
      <p>Click "Download catalog" to get your CSV augmented with boolean <code>in_survey_X</code> columns.</p>
    </div>

  </div>

  <!-- ‚îÄ‚îÄ COLOR THEMES ‚îÄ‚îÄ -->
  <div class="section-label">Color Themes (Paul Tol Palettes)</div>
  <div class="themes-row">

    <div class="theme-card">
      <h4>Rainbow (Default)</h4>
      <div class="theme-swatches">
        <div class="swatch" style="background:#AA6F9E" title="KiDS"></div>
        <div class="swatch" style="background:#882E72" title="Euclid"></div>
        <div class="swatch" style="background:#1965B0" title="HSC"></div>
        <div class="swatch" style="background:#6195CF" title="DES"></div>
        <div class="swatch" style="background:#4EB265" title="UNIONS"></div>
        <div class="swatch" style="background:#F7CB45" title="DESI Legacy"></div>
        <div class="swatch" style="background:#EE8026" title="eRASS1"></div>
        <div class="swatch" style="background:#DC050C" title="LSST WFD"></div>
        <div class="swatch" style="background:#DDCC77" title="Roman HLWAS"></div>
        <div class="swatch" style="background:#44AA99" title="Roman HLWAS Deep"></div>
      </div>
      <p style="font-size:11px;color:var(--muted);margin-top:10px">Full spectrum spread ‚Äî maximum perceptual contrast between adjacent surveys.</p>
    </div>

    <div class="theme-card">
      <h4>Iridescent</h4>
      <div class="theme-swatches">
        <div class="swatch" style="background:#FEFBE9"></div>
        <div class="swatch" style="background:#FCF7D5"></div>
        <div class="swatch" style="background:#F5F3C1"></div>
        <div class="swatch" style="background:#EAF0B5"></div>
        <div class="swatch" style="background:#DDECBF"></div>
        <div class="swatch" style="background:#BFE5BE"></div>
        <div class="swatch" style="background:#98D9C2"></div>
        <div class="swatch" style="background:#70C8D5"></div>
        <div class="swatch" style="background:#CABD8B"></div>
        <div class="swatch" style="background:#7EC8D0"></div>
      </div>
      <p style="font-size:11px;color:var(--muted);margin-top:10px">Sequential blue-to-plum ‚Äî works well for ordered or ranked survey comparisons.</p>
    </div>

    <div class="theme-card">
      <h4>Vivid</h4>
      <div class="theme-swatches">
        <div class="swatch" style="background:#E73F74"></div>
        <div class="swatch" style="background:#803E75"></div>
        <div class="swatch" style="background:#FF7A5C"></div>
        <div class="swatch" style="background:#A50026"></div>
        <div class="swatch" style="background:#53777A"></div>
        <div class="swatch" style="background:#009F81"></div>
        <div class="swatch" style="background:#00A6CA"></div>
        <div class="swatch" style="background:#F6C141"></div>
        <div class="swatch" style="background:#E8D84C"></div>
        <div class="swatch" style="background:#44AA99"></div>
      </div>
      <p style="font-size:11px;color:var(--muted);margin-top:10px">High-saturation, high-contrast ‚Äî optimal for presentations and printed posters.</p>
    </div>

  </div>

  <!-- ‚îÄ‚îÄ STEP-BY-STEP WORKFLOW ‚îÄ‚îÄ -->
  <div class="section-label">Quick Start</div>
  <div class="workflow" style="margin-bottom:56px">
    <div class="workflow-step">
      <div class="step-num">1</div>
      <h4>Open the App</h4>
      <p>Visit the GitHub Pages URL or run locally with <code>python3 -m http.server</code></p>
    </div>
    <div class="workflow-step" style="border-left:none">
      <div class="step-num">2</div>
      <h4>Select Surveys</h4>
      <p>Click "Select Survey(s)" and check one or more surveys from the dropdown</p>
    </div>
    <div class="workflow-step" style="border-left:none">
      <div class="step-num">3</div>
      <h4>Explore the Map</h4>
      <p>Rotate &amp; zoom in Aladin, or switch to Equirectangular for a full-sky flat view</p>
    </div>
    <div class="workflow-step" style="border-left:none">
      <div class="step-num">4</div>
      <h4>Analyse Overlaps</h4>
      <p>Read intersection area in the Coverage panel, toggle cross-match highlight</p>
    </div>
    <div class="workflow-step" style="border-left:none">
      <div class="step-num">5</div>
      <h4>Cross-Match &amp; Export</h4>
      <p>Upload a catalog, check per-source survey membership, download augmented CSV</p>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ NOTES ‚îÄ‚îÄ -->
  <div class="section-label">Technical Notes</div>
  <div class="note">All processing is fully <strong>client-side</strong> ‚Äî no data is sent to any server. MOC intersection calculations use a compiled Rust/WebAssembly module (<code>moc-wasm</code>).</div>
  <div class="note">Survey footprints are stored as <strong>FITS MOC files</strong> (NUNIQ encoding, <code>pre_v2=True</code>) compatible with Aladin Lite v2. GeoJSON equivalents power the equirectangular overlays.</div>
  <div class="note">The Roman HLWAS footprints are generated from the ROTAC-approved tiling plan (<code>hlwas_tiling_241206.txt.gz</code>). The survey has not launched; these are planning-stage footprints.</div>

  <!-- ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ -->
  <div class="footer">
    Sky Coverage Explorer v2.3.0 &nbsp;¬∑&nbsp;
    <a href="https://github.com/ruslanbrilenkov/skymap.github.io">GitHub</a> &nbsp;¬∑&nbsp;
    Surveys: Euclid, LSST, Roman HLWAS, DESI Legacy, DES, HSC, KiDS, UNIONS, eRASS1
  </div>

</div>
</body>
</html>
